<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<div class="container border shadow rounded p-4 my-0" style="max-width: 1020px; height: 640px; overflow-y: auto;">
  <h5 class="mb-4 fw-bold medium">ðŸŽµ Song Update Page</h5>

  <div class="d-flex justify-content-between align-items-center mb-3 small">
    <div>Outlet Aktif: <span class="badge bg-success" id="outlet-name">Belum diset</span></div>
    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#modal-set-outlet">Set Outlet</button>
  </div>
<div class="row">
  <div class="col-md-6">
      <div class="col-md-12">
        <label for="">List Lagu</label>
        <table class="table"></table>
      </div>
    </div>
  <div class="col-md-6">
    <div class="col-md-12">
      <label for="">Update list</label>
      <table class="table"> </table>
    </div>
    <div class="col-md-12">
      <label for="">Update History</label>
      <table class="table"></table>
    </div>
    <div class="col-md-12">
      <label for="">Log</label>
      <textarea class="form-control" id=""></textarea>
    </div>
  </div>
</div>
</div>



<div class="modal fade" id="modal-set-outlet" tabindex="-1" aria-labelledby="modalSetOutletLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content small">
      <div class="modal-header">
        <h6 class="modal-title" id="modalSetOutletLabel">Set Outlet</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label for="outlet-input" class="form-label">Nama Outlet</label>
        <input type="text" id="outlet-input" class="form-control" required>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-sm">Simpan</button>
      </div>
    </form>
  </div>
</div>

<div class="modal fade" id="modal-upload-list" tabindex="-1" aria-labelledby="modalUploadListLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content small">
      <div class="modal-header">
        <h6 class="modal-title" id="modalUploadListLabel">Upload Song List</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6 class="mb-2">Upload Progress</h6>
        <div class="progress mb-2" style="height: 16px;">
          <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" style="width: 0%" id="uploadProgressBar">0%</div>
        </div>
        <div class="d-flex justify-content-between small">
          <div id="uploadSpeed">Speed: 12 KB/s</div>
          <div id="uploadPercentage">0%</div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success btn-sm" onclick="confirmUpload()">Upload</button>
      </div>
    </form>
  </div>
</div>

<script>
    const { ipcRenderer } = require('electron');
    const container = document.getElementById('diskProgressContainer');
    const progressDownloadBar = document.getElementById('downloadProgressBar');
    const downloadedText = document.getElementById('downloaded');
    const progressUploadBar = document.getElementById('uploadProgressBar');
 
    const progressSpeed = document.getElementById('txt-speed');
    const progressSize = document.getElementById('txt-progress');
    const progressFileName = document.getElementById('txt-file');
    
    const disks = [
        {
            label: 'DISK B',
            percent: 60
        },
    {
      label: 'DISK C',
      percent: 80
    },
    {
      label: 'DISK D',
      percent: 30
    },
    {
      label: 'DISK E',
      percent: 25
    },
    {
      label: 'DISK F',
      percent: 75
    },
    {
      label: 'DISK G',
      percent: 45
    },
    {
      label: 'DISK H',
      percent: 50
    },
    {
      label: 'DISK I',
      percent: 85
    },
    {
      label: 'DISK J',
      percent: 20
    },
  ];

  const setDownloaded = (value) =>{
    const downloaded = '10 of 124';
    downloadedText.textContent = downloaded;
  }
  setDownloaded()
  
  ipcRenderer.on('SEND-DOWNLOAD-PROGRESS', async (event, data) => {
    progressDownloadBar.style.width = `${data.percent}%`;
    progressDownloadBar.textContent = `${data.percent}%`;
    progressSpeed.innerHTML = `${data.speed} MBps`;
    progressSize.innerText = `${data.downloaded}/${data.size} MB`;
  });

  const setUploadProgress = () =>{
    const progressUpload = 43;
    progressUploadBar.style.width = progressUpload + '%';
    progressUploadBar.textContent = progressUpload + '%';
  }

  const updateProgress = [
    {
      state: 'MOVING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING_MOVE',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'DOWNLOADING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'DONE',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
    {
      state: 'WAITING',
      fileName: 'ngarit.3gp',
      downloadPercent: 12,
      downloadSpeed: '100MB/s',
      movePercent: 90,
      folderDest: '/NGANJUK'

    },
  ]
  

  disks.forEach(disk => {
    let color = 'info'; // default
    if (disk.percent > 80) {
      color = 'danger';
    } else if (disk.percent > 50 && disk.percent <= 80) {
      color = 'warning';
    }

    const label = document.createElement('label');
    label.className = 'form-label';
    label.textContent = disk.label;

    const progressDiv = document.createElement('div');
    progressDiv.className = 'progress mb-2';

    const bar = document.createElement('div');
    bar.className = `progress-bar bg-${color}`;
    bar.style.width = `${disk.percent}%`;
    bar.textContent = `${disk.percent}%`;

    progressDiv.appendChild(bar);
    container.appendChild(label);
    container.appendChild(progressDiv);
  });

  const updateHistory = [
    "0607 - Update Finished",
    "0606 - Update Finished",
    "0605 - Update Finished",
    "0604 - Update Finished",
    "0603 - Update Finished",
    "0602 - Update Finished",
    "0601 - Update Finished"
  ];

  const listContainer = document.getElementById("updateHistoryList");

  updateHistory.forEach(item => {
    const li = document.createElement("li");
    li.className = "list-group-item";
    li.textContent = item;
    listContainer.appendChild(li);
  });

  const updates = ["0608", "0609"];

  const ul = document.getElementById("updateListContainer");

  updates.forEach(code => {
    const li = document.createElement("li");
    li.className = "list-group-item d-flex justify-content-between align-items-center";

    li.innerHTML = `
      Update ${code}
      <button class="btn btn-sm btn-success">Start Update</button>
    `;

    ul.appendChild(li);
  });

  function confirmUpload() {
    const confirmed = confirm("Apakah Anda yakin ingin mengupload file?");
    if (confirmed) {
    }
  }
  // setProgressBar()
</script>

